# 📱 データ引き継ぎ手順書

## 概要

ローカル版（`C:\Users\shiro\Documents\health\index.html`）で記録した体調データと恐竜の育成データを、GitHub版のアプリに引き継ぐための手順です。

---

## 🔄 引き継ぎが必要な理由

- ローカル版（`file://`）とGitHub版（`https://`）は異なるOriginのため、LocalStorageは共有されません
- 既に実装されているバックアップ/復元機能を使用してデータを移行します

---

## 📊 引き継がれるデータ

以下のデータが完全に移行されます：

1. **体調記録** (`simpleHealthRecords`)
   - 全ての日付の体調値（1-10）
   - メモ
   - タイムスタンプ

2. **成長データ** (`growthData`)
   - 選択中の恐竜
   - 連続記録日数
   - 最終記録日
   - 選択開始日
   - 現在の成長段階

3. **図鑑データ** (`encyclopedia`)
   - アンロックされた恐竜のリスト
   - 各恐竜の最大到達段階
   - 達成日時

---

## 📝 手順1: ローカル版からのデータエクスポート

### 1-1. ローカル版アプリを開く

ブラウザで以下を開く：
```
file:///C:/Users/shiro/Documents/health/index.html
```

### 1-2. 設定画面を開く

1. 画面右上の **⚙️（設定）ボタン** をクリック
2. 設定モーダルが開きます

### 1-3. データをバックアップ

1. 「💾 データのバックアップ」セクションを確認
2. テキストエリアに自動的にバックアップデータが表示されています
3. **「📋 データをコピー」ボタン** をクリック
4. 「データをコピーしました！」というメッセージが表示されます

### 1-4. バックアップデータを保存

> **重要**: GitHub版への移行前に、念のためデータを保存しておきましょう

1. メモ帳を開く（Windows + R → `notepad`）
2. `Ctrl + V` で貼り付け
3. 「health-backup-YYYYMMDD.txt」という名前で保存（例: `health-backup-20260127.txt`）

**バックアップデータの例**:
```json
{
  "version":1,
  "timestamp":1738000000000,
  "simpleHealthRecords":[{"date":"2026-01-27","time":"23:00:00","value":8,"memo":"よく眠れた","timestamp":1738000000000}],
  "growthData":{"selectedDinosaur":"trex","consecutiveDays":5,"lastRecordDate":"2026-01-27","selectionDate":"2026-01-23","currentStage":1},
  "encyclopedia":{"trex":{"unlocked":true,"maxStage":1,"lastAchieved":"2026-01-24"}}
}
```

---

## 📱 手順2: GitHub版へのデータインポート

### 2-1. GitHub版アプリを開く

AndroidのChromeで以下を開く：
```
https://[あなたのGitHubユーザー名].github.io/[リポジトリ名]/
```

> まだGitHub Pagesで公開していない場合は、先に公開してください

### 2-2. 初回起動時

1. 恐竜選択画面が表示されます
2. **適当な恐竜を選択**（後で上書きされます）
3. アプリが起動します

### 2-3. 設定画面を開く

1. 画面右上の **⚙️（設定）ボタン** をタップ
2. 設定モーダルが開きます

### 2-4. データを復元

1. 「♻️ データの復元」セクションまでスクロール
2. テキストエリアをタップ
3. **保存したバックアップデータを貼り付け**
   - PCで開いたメモ帳からコピーして、スマホのクリップボードに共有
   - またはクラウド（Google Keep、LINEのKeep memなど）経由で共有
4. **「⚡ データを復元」ボタン** をタップ
5. 確認ダイアログ「現在のデータは全て上書きされます。本当に復元しますか？」→ **OK**
6. 「データを復元しました！」というメッセージが表示されます
7. ページがリロードされます

### 2-5. データ確認

1. 恐竜が正しく表示されていることを確認
2. 連続記録日数が正しいか確認
3. 「📊 最近の記録」に過去の記録が表示されていることを確認

---

## ✅ 引き継ぎ成功の確認項目

- [ ] 選択中の恐竜が正しい
- [ ] 連続記録日数が正しい
- [ ] 恐竜の成長段階が正しい
- [ ] 過去の記録がすべて表示される
- [ ] アンロックされた恐竜が正しい

---

## 🔄 PC→スマホへのデータ共有方法

### 方法1: クラウド経由（推奨）

1. **Google Keep**:
   - PCでGoogle Keepを開く
   - 新しいメモを作成
   - バックアップデータを貼り付け
   - スマホのGoogle Keepアプリで開く
   - コピーしてアプリに貼り付け

2. **LINE Keep メモ**:
   - PCのLINEでKeep メモを開く
   - バックアップデータを保存
   - スマホのLINEでコピー

### 方法2: メール経由

1. 自分宛にメールを送信（バックアップデータを本文に貼り付け）
2. スマホでメールを開いてコピー

### 方法3: QRコード（短いデータの場合）

1. バックアップデータをQRコード化
2. スマホでスキャン

---

## ⚠️ トラブルシューティング

### Q1: 「データの形式が正しくありません」と表示される

**原因**: JSONデータが破損しています

**対処法**:
1. コピーしたデータが完全か確認
2. 改行や空白が余計に入っていないか確認
3. `{`で始まり`}`で終わっているか確認

### Q2: 復元後にデータが表示されない

**原因**: ページのリロードが必要です

**対処法**:
1. ブラウザをリロード（引き下げて更新）
2. アプリを一度閉じて再度開く

### Q3: バックアップデータが長すぎて貼り付けられない

**原因**: 記録が非常に多い場合、テキストが長くなります

**対処法**:
1. PCとスマホを直接USBケーブルで接続
2. ファイルとして転送
3. スマホでテキストファイルを開いてコピー

---

## 📋 定期的なバックアップのすすめ

データ消失を防ぐため、定期的にバックアップすることをおすすめします：

### 週1回のバックアップ

1. ⚙️（設定）を開く
2. 「📋 データをコピー」
3. Google Keepやメモ帳に保存

### 自動バックアップ（推奨）

GitHub版を使用している場合：
- データは端末のLocalStorageに保存されます
- ブラウザのデータを消去しない限り保持されます
- 念のため月1回は手動バックアップを推奨

---

## 🎯 まとめ

データ引き継ぎは **3ステップ** で完了します：

1. ローカル版で **「データをコピー」**
2. バックアップデータを **保存**（念のため）
3. GitHub版で **「データを復元」**

これで全ての記録と育成状況が完全に引き継がれます！

---

## 📞 サポート

問題が発生した場合は、以下の情報を確認してください：

- Chrome開発者ツール（F12）でコンソールエラーを確認
- バックアップデータが正しいJSON形式か確認
- ブラウザのLocalStorageが有効か確認

**楽しい健康管理を続けてください！** 🦖✨
